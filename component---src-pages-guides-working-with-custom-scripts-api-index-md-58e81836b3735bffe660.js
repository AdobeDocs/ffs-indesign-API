"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[806],{45460:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return p},default:function(){return l}});var s=a(58168),i=a(80045),n=(a(88763),a(15680)),r=a(83407);const c=["components"],p={},o={_frontmatter:p},d=r.A;function l(e){let{components:t}=e,a=(0,i.A)(e,c);return(0,n.mdx)(d,(0,s.A)({},o,a,{components:t,mdxType:"MDXLayout"}),(0,n.mdx)("h1",{id:"working-with-the-custom-scripts-api"},"Working with the Custom Scripts API"),(0,n.mdx)("p",null,"With the Custom Scripts API, register ",(0,n.mdx)("a",{parentName:"p",href:"../writing-scripts-for-custom-scripts-api/"},"custom scripts bundle that you've created")," with the API.\nThen use those custom scripts on documents by referencing the ",(0,n.mdx)("inlineCode",{parentName:"p"},"{SCRIPT_ID}")," and ",(0,n.mdx)("inlineCode",{parentName:"p"},"{SCRIPT_NAME}"),"."),(0,n.mdx)("h2",{id:"before-you-start"},"Before you start"),(0,n.mdx)("ul",null,(0,n.mdx)("li",{parentName:"ul"},"You'll need ",(0,n.mdx)("a",{parentName:"li",href:"../../getting_started/index.md#Access-tokens"},"a valid access token and client ID"),".")),(0,n.mdx)("p",null,"In the cURL commands, be sure to:"),(0,n.mdx)("ul",null,(0,n.mdx)("li",{parentName:"ul"},"Update the ",(0,n.mdx)("inlineCode",{parentName:"li"},"Authorization")," with the bearer access token."),(0,n.mdx)("li",{parentName:"ul"},"Update ",(0,n.mdx)("inlineCode",{parentName:"li"},"x-api-key")," with the client ID."),(0,n.mdx)("li",{parentName:"ul"},"Update ",(0,n.mdx)("inlineCode",{parentName:"li"},"x-gw-ims-org-id")," with your organization ID.")),(0,n.mdx)("h2",{id:"register-a-custom-script"},"Register a custom script"),(0,n.mdx)("p",null,(0,n.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,n.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"38.125%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,n.mdx)("picture",{parentName:"span"},"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/ffs-indesign-API/static/5ab4a443033818800cb725fd90cca151/5530d/custom-script-workflow.webp 320w","/ffs-indesign-API/static/5ab4a443033818800cb725fd90cca151/0c8fb/custom-script-workflow.webp 640w","/ffs-indesign-API/static/5ab4a443033818800cb725fd90cca151/94b1e/custom-script-workflow.webp 1280w","/ffs-indesign-API/static/5ab4a443033818800cb725fd90cca151/0b34d/custom-script-workflow.webp 1920w","/ffs-indesign-API/static/5ab4a443033818800cb725fd90cca151/d5269/custom-script-workflow.webp 2560w","/ffs-indesign-API/static/5ab4a443033818800cb725fd90cca151/43b69/custom-script-workflow.webp 4054w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/ffs-indesign-API/static/5ab4a443033818800cb725fd90cca151/dd4a7/custom-script-workflow.png 320w","/ffs-indesign-API/static/5ab4a443033818800cb725fd90cca151/0f09e/custom-script-workflow.png 640w","/ffs-indesign-API/static/5ab4a443033818800cb725fd90cca151/bbbf7/custom-script-workflow.png 1280w","/ffs-indesign-API/static/5ab4a443033818800cb725fd90cca151/ac7a9/custom-script-workflow.png 1920w","/ffs-indesign-API/static/5ab4a443033818800cb725fd90cca151/c7a69/custom-script-workflow.png 2560w","/ffs-indesign-API/static/5ab4a443033818800cb725fd90cca151/56f6e/custom-script-workflow.png 4054w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,n.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/ffs-indesign-API/static/5ab4a443033818800cb725fd90cca151/bbbf7/custom-script-workflow.png",alt:"custom script workflow",title:"custom script workflow",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,n.mdx)("p",null,"New custom scripts get registered by making a POST call to the API."),(0,n.mdx)("h3",{id:"quickstart"},"Quickstart"),(0,n.mdx)("p",null,"Use this cURL command to register a custom script.\nBe sure to update the ",(0,n.mdx)("inlineCode",{parentName:"p"},"{YOUR_CUSTOM_SCRIPT_ZIP}")," with the ",(0,n.mdx)("a",{parentName:"p",href:"../writing-scripts-for-custom-scripts-api/"},"path to your custom script"),"."),(0,n.mdx)("pre",null,(0,n.mdx)("code",{parentName:"pre",className:"language-curl"},"curl --request POST \\\n--url https://indesign.adobe.io/v3/scripts \\\n--header 'Authorization: Bearer {YOUR_OAUTH_TOKEN}' \\\n--header 'x-api-key: {YOUR_API_KEY}' \\\n--header 'Content-Type: multipart/form-data' \\\n--header 'x-gw-ims-org-id: {YOUR_ORG_ID}' \\\n--form file=@{YOUR_CUSTOM_SCRIPT_ZIP}\n")),(0,n.mdx)("p",null,"In the response, you'll receive a url which contains ",(0,n.mdx)("inlineCode",{parentName:"p"},"{SCRIPT_ID}")," and ",(0,n.mdx)("inlineCode",{parentName:"p"},"{SCRIPT_NAME}"),"."),(0,n.mdx)("p",null,(0,n.mdx)("strong",{parentName:"p"},"Example response")),(0,n.mdx)("pre",null,(0,n.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "url": "https://indesign.adobe.io/v3/{SCRIPT_ID}/{SCRIPT_NAME}",\n  "capability": "sample-execution",\n  "version": "1.0.0"\n}\n')),(0,n.mdx)("h2",{id:"execute-a-custom-script"},"Execute a custom script"),(0,n.mdx)("p",null,(0,n.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,n.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"43.125%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,n.mdx)("picture",{parentName:"span"},"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/ffs-indesign-API/static/530d07ce502caa8476d5926e589c2fb1/5530d/status-poll-script.webp 320w","/ffs-indesign-API/static/530d07ce502caa8476d5926e589c2fb1/0c8fb/status-poll-script.webp 640w","/ffs-indesign-API/static/530d07ce502caa8476d5926e589c2fb1/94b1e/status-poll-script.webp 1280w","/ffs-indesign-API/static/530d07ce502caa8476d5926e589c2fb1/0b34d/status-poll-script.webp 1920w","/ffs-indesign-API/static/530d07ce502caa8476d5926e589c2fb1/d5269/status-poll-script.webp 2560w","/ffs-indesign-API/static/530d07ce502caa8476d5926e589c2fb1/b8ec4/status-poll-script.webp 3304w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/ffs-indesign-API/static/530d07ce502caa8476d5926e589c2fb1/dd4a7/status-poll-script.png 320w","/ffs-indesign-API/static/530d07ce502caa8476d5926e589c2fb1/0f09e/status-poll-script.png 640w","/ffs-indesign-API/static/530d07ce502caa8476d5926e589c2fb1/bbbf7/status-poll-script.png 1280w","/ffs-indesign-API/static/530d07ce502caa8476d5926e589c2fb1/ac7a9/status-poll-script.png 1920w","/ffs-indesign-API/static/530d07ce502caa8476d5926e589c2fb1/c7a69/status-poll-script.png 2560w","/ffs-indesign-API/static/530d07ce502caa8476d5926e589c2fb1/0a04e/status-poll-script.png 3304w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,n.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/ffs-indesign-API/static/530d07ce502caa8476d5926e589c2fb1/bbbf7/status-poll-script.png",alt:"status poll script",title:"status poll script",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,n.mdx)("p",null,"Assets specified in the execution request are downloaded on the\nlocal file system using the specified identifiers. The custom script\nshould be authored to work against locally downloaded assets."),(0,n.mdx)("p",null,"The execution request can include a JSON dictionary as a parameter.\nThe custom script defines the parameters and passes as is\nto it during execution"),(0,n.mdx)("p",null,"The generated output uploads to the target location. If no location is provided,\nthe assets upload to temporary storage."),(0,n.mdx)("p",null,"Each execution request is an asynchronous operation for which the status can be\nfetched using the ",(0,n.mdx)("a",{parentName:"p",href:"../../api/"},"Status API"),". A link with expiry is provided in the execution status."),(0,n.mdx)("h3",{id:"quickstart-1"},"Quickstart"),(0,n.mdx)("p",null,"Use this cURL command to run a custom script on a document."),(0,n.mdx)("pre",null,(0,n.mdx)("code",{parentName:"pre",className:"language-curl"},'curl --request POST \\\n--url https://indesign.adobe.io/v3/{SCRIPT_ID}/{SCRIPT_NAME} \\\n--header \'Authorization: Bearer {YOUR_OAUTH_TOKEN}\' \\\n--header \'Content-Type: application/json\' \\\n--header \'x-api-key: {YOUR_API_KEY}\' \\\n--header \'x-gw-ims-org-id: {YOUR_ORG_ID}\' \\\n--data-raw \'{\n  "assets": [\n    {\n      "source": {\n        "url": "{YOUR_PRE-SIGNED_URL}"\n      },\n      "destination": "sample.indd"\n    }\n  ],\n  "params": {\n    "targetDocument": "sample.indd",\n    "outputPath": "converted.idml"\n  },\n}\'\n')),(0,n.mdx)("p",null,"The raw data may include three\nparts:"),(0,n.mdx)("ul",null,(0,n.mdx)("li",{parentName:"ul"},(0,n.mdx)("strong",{parentName:"li"},"assets")," - Input assets for the request."),(0,n.mdx)("li",{parentName:"ul"},(0,n.mdx)("strong",{parentName:"li"},"params")," - Information about what to do with the input assets."),(0,n.mdx)("li",{parentName:"ul"},(0,n.mdx)("strong",{parentName:"li"},"outputs")," - Specify locations where the output assets are uploaded. Without an ",(0,n.mdx)("inlineCode",{parentName:"li"},"outputs")," parameter, the output assets are stored in a temporary\nrepository, and a ",(0,n.mdx)("a",{parentName:"li",href:"../../getting_started/concepts/index.md#Pre-signed-URLs"},"pre-signed URL")," will be shared for those assets, which will be valid for 24hrs.")),(0,n.mdx)("p",null,"Consult this skeleton ",(0,n.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/commerce/webapi/get-started/gs-curl/"},"cURL request")," for more details."),(0,n.mdx)("p",null,(0,n.mdx)("strong",{parentName:"p"},"Example response")),(0,n.mdx)("pre",null,(0,n.mdx)("code",{parentName:"pre",className:"language-json"},'{ \n\n"jobId": "9b9d00c5-8659-4766-8430-ed0a1c9bd87d", \n\n"statusUrl": "https://indesign.adobe.io/v3/status/9b9d00c5-8659-4766-8430-ed0a1c9bd87d" \n\n} \n')))}l.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-working-with-custom-scripts-api-index-md-58e81836b3735bffe660.js.map